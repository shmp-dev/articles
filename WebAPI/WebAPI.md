# Web API
## Web API とは
ここでは、Web APIを、「HTTPプロトコルを利用してネットワーク越しに呼び出すAPI」として定義する。
APIとは "Application Programming Interface" の略

簡単にいうと...
> あるURLにアクセスすることで、サーバ側の情報を書き換えたり、サーバ側に置かれた情報を取得できたりすることができるウェブシステムで、プログラムからアクセスしてそのデータを機械的に利用するためのもの

プロトコルとしてHTTPを使用しているため、エンドポイントはURLによって指定される
通常のWebページはブラウザで人間が直接アクセスすることを想定しているため、URLにアクセスするとHTMLなどのデータが返ってくる。
対してAPIはJSONなどの形式でレスポンスが返ってくる。これはプログラムが「機械的に」データを取得し活用することが目的だから。

## Web API の利用シーン
### 外部サービスの統合
企業や個人が公開するWeb APIを活用することで、自身のサービスに新たな機能を簡単に追加できます。例えば、Yahoo! JAPANの地図情報APIを使えば、ユーザーの位置情報に基づいて地図を表示するサービスを簡単に実装できます。これにより、より便利で付加価値の高いサービスを提供することが可能になります。

### フロントエンドとバックエンドの橋渡しとしての利用
もう一つの重要な活用方法は、Web APIをフロントエンドとバックエンドを繋ぐインターフェースとして利用することです。
例えば、在庫管理システムを構築する際、サーバーが在庫検索や入庫、引き当てなどの機能をWeb APIとして提供し、フロントエンドはそのAPIを呼び出して画面表示やデータ更新を行います。
Web APIを利用してバックエンドとフロントエンドを切り離すことで、大規模なチームでの開発が効率的かつ安全に進められます。
さらに、API経由でのみデータベースやユーザー情報にアクセスする設計にすることで、不正利用や情報漏洩などのセキュリティリスクを低減することができます。

## APIの種類
一言にWeb APIといっても、多様な定義がある
特に見かけることが多いものとして、REST API, GraphQL, tRPCの3種類の方式がある。

### RESTについて
そもそも"REST（REpresentational State Transfer：レスト）"とは、Web上のリソース（データ）を取り扱う際のアーキテクチャ（設計ルール）を指します。REST APIは、このアーキテクチャに則って設計されたAPIです。

"JSON over HTTP"や、"XML over HTTP"などのような、HTTP経由でXMLやJSONを返すAPI自体をREST API と呼ぶ場合もあるが、REST という言葉はもう少し厳密な定義があるため、単にこれらをREST APIと呼ぶのは拡大解釈と言える。（広義のRESTではある）

### REST APIの特徴
#### リソースを一意なパスで表現する
REST APIでは、操作対象となるデータを「リソース」として扱い、それぞれのリソースに一意のパス（URI）を割り当てて識別します。

#### リソースに対する操作をHTTPメソッドで表現する
REST APIでは、リソースへの操作をHTTPメソッドで表現します。
URIが操作の対象となるリソースを示し、HTTPメソッドがそのリソースに対して何を行うかを指定します。

- URI："操作する対象 = リソース"
- メソッド：操作内容

メソッドの例

| メソッド名 | 説明                     |
| ---------- | ------------------------ |
| GET        | リソースの取得           |
| POST       | リソースの新規登録       |
| PUT        | 既存リソースの更新       |
| DELETE     | リソースの削除           |
| PATCH      | リソースの一部変更       |
| HEAD       | リソースのメタ情報の取得 |

#### APIの呼び出しはステートレスに行う
REST APIの設計原則の一つに、ステートレス性があります。ステートレス性とは、APIの各呼び出しが独立しており、前回の呼び出しの状態に依存しないことを意味します。これにより、サーバーはクライアントの状態を保持する必要がなくなり、スケーラビリティやパフォーマンスが向上します。

#### データは主にJSONでやり取りする
REST APIではデータの送受信にJSON形式が多く使われますが、ルールとして定められているものではないため、XMLやYAMLといった他の形式を使用することも可能です。
ただし、JSONがデファクトスタンダートとして確立されているため、特別な理由がない場合はJSONを使用するのが無難です。

## HTTPメソッドの使い分け
### GET メソッド
GET メソッドはウェブへのアクセスで最も多く利用されているもので、「情報の取得」を表すメソッドです。
URIで指定されたリソースを取得されるために用います。したがって、GETを使ったアクセスで、サーバ上のリソースが変更されることは基本的にありえません（バックエンド側の実装内容による例外はある）
ちなみに、HTMLの<a>タグを使用したリンクは全てGETとして扱われます。

### POST メソッド
POST メソッドは指定したURIに属する新しいリソースを送信する、つまり簡単に言えば新しい情報を登録するために利用するのが本来の目的です。
情報の変更や削除のためのメソッドは別途用意されています。
例えば、ユーザーを新規登録する際にはPOSTを使用しますが、既存のユーザー情報を修正する場合はPUT、登録ずみのデータを削除する場合にはDELETEを使用するべきです。


# 参考文献
- Web API: The Good Parts
- フロントエンドの知識地図