# リーダブルコード
## 2章
### 2.1 明確な単語を選ぶ
このセクションには、命名には明確な単語を選ばなければならないという旨が記載されている。

> 【リーダブルコード 2.1節】
> ▼Sample Code
> ```
> def GetPage(url):
> ```
> 「get」という単語からは何も伝わってこない。
> このメソッドはページをどこからとってくるのだろう？
> ローカルキャッシュから？　データベールから？　インターネットから？
> インターネットから取ってくるのであれば、`FetchPage()`や`DownloadPage()`の方が明確だ

この例に意表をつかれるエンジニアは多いのではないだろうか。
`getXXX()`という表記は最も使用しがちなメソッド名ではないかと思う。

`get`という命名について絶対に使用してはいけないとまでは思わないが、
"取得する" 処理を記述する際に、反射的に`get`を使用するのではなく、一考するきっかけになった。

英語圏ではない純ジャパとしては、的確な表現が可能な単語がないか、
類語辞典（シソーラス）を適宜確認するという対策を徹底したい。

// ある案件では、スタブとして作成されたAPIの命名が全て`retrieve`だった
// gitで、`git fetch` と`git pull`は意味が分かりにくい
// 日本語で変数名をつけるのはどうなのか「hinmei」

## 【コラム】リーダブルコードに追加したい内容
情報量のある単語のみ書くべき
- ~Flg は情報量0
  - isInitializedFlg (初期表示済みフラグ)
  - isInitialized だけで良い

- ~Data も情報量0
  - orderData (注文データ)
  - order だけで良い


## 3章 誤解されない名前
### 3.1 例：filter()
このセクションでは、誤解される命名の例として、`filter()`が紹介されている。

> 【リーダブルコード 3.1節】
> ▼Sample Code
> ```
> results = Database.all_objects.filter("year <= 2011");
> ```
> 
> このresultsには何が含まれているか、はっきりと言い切れるだろうか？
> - 「year <= 2011」のオブジェクト
> - 「year <= 2011」ではないオブジェクト
> 
> filterという言葉だけでは、「選択する」のか「除外」するのかわからないので、誤解を招いてしまう。
> 「選択する」のであれば、`select()`にした方がいい。
> 「除外する」のであれば、`exclude()`にした方がいい。

`filter`という言葉を辞書で引くと、以下が記載されている。

> [名詞]
> 1. (液体・ガスなどの)濾過(ろか)器[装置].
> 2. 濾過用多孔性物質 《濾過作用を行なう布・木炭・砂利など》.
> 
> [動詞]
> 1. 〈ものを〉濾過する，こす.
> 2. 〔+目的語+out〕〈ものを〉濾過して取り除く.

注目して欲しいのは[動詞]の方で、`filter`には "ものを濾過する" というという意味がある。
上記の例では "ものを濾過する" の意で`filter`という命名がされていると推察するが、
`filter()`だけでは濾過した結果「フィルターに残ったもの」を指すのか、「フィルターを透過したもの」を指すのかわからない。
（条件に一致するものを「選択する」のか「除外する」のかわからない）

つまり、その命名だけでは意味が一意に定まらない、誤解を招く言葉ということになる。
そのため、上記の例では`select（選択する）`や`exclude（除外する）`など、
誤解を招く余地が少ない言葉選びを推奨している。

---

例で挙げられているコードはpythonで書かれているが、
他の言語でもビルトイン関数として`filter()`を採用しているものは多い。
- JavaScript
- Swift
- Java
- Haskell

個人的に、上記の例と同様に誤解を招く命名であると感じるビルトイン関数がJavaScriptにある。
`filter()`と同じく、配列の操作に使用する`map()`関数は`map`という単語の意味だけでは処理の内容を特定することは難しいと思う。

`map`を辞書で引くと、以下が記載されている。

> [名詞]
> 1. (1 枚の)地図.
> 2. 天体図，星座図.
> 
> [動詞]
> 1. (mapped; map・ping) 〈…の〉地図を作る.

対して、JavaScriptの`map()`関数の意味は以下である。

> map() は Array インスタンスのメソッドで、
> 与えられた関数を配列のすべての要素に対して呼び出し、その結果からなる新しい配列を生成します。

プログラミングでのmapの意味は、数学的な「写像(mappint)」を反映しての結果であるが、直感的だとは言い難い。

生成AIにいくつか改善案を提示してもらった。

【chatGPT 4o が考える、map()関数のリネーム案】
- transform()
- applyToAll()
- forEachWithResult()
- processEach()
- generateNewArray()

結果を見て、`transform()`のように１単語で表現するのは難しいと感じた。
この中で選ぶとすれば、`processEach()`は良いのではないかと思うが、どうだろうか。意見を募集したい。

## まとめ
プログラミングに正解はないが、最善を目指すことはできると思う。
慣習的にコードを書くのではなく、常により良い表現はないか、自問自答する姿勢を持ち続けることが大切だと感じた。

プログラミングに正解はないが、議論しブラッシュアップしていくことができるからこそ、
言語に多様性が生まれ、より良い言語にするための競争が生まれるのではないかと思った。