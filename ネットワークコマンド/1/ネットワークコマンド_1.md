# ネットワークコマンドでネットワークの仕組みを確認する（ipconfig 編）
##　はじめに
普段何気なく使用しているネットワーク、仕組みを理解していなくても問題なく使えていると思います。  
ですが、仕組みを知ることで、トラブルシューティング能力を高めたり、セキュリティへの理解を深めたり、効率的な使い方を見つけたりすることが可能になります。  
本記事は **「ネットワークを使っているけれど、その仕組みはよくわかっていない」** という人に向けて書かれています。  
基本的なネットワークコマンドを使って、ネットワークの仕組みを可視化し、一緒に理解していきましょう。 

> 参考文献：[コンピュータはなぜ動くのか 第２版 知っておきたいハードウエア＆ソフトウエアの基礎知識](https://amzn.asia/d/f8jp2tW)

## ネットワークコマンドとは
**ネットワークコマンドとは、ネットワークの設定や状態を確認するための小さなプログラムです。**  
Windowsには、いくつかのネットワークコマンドが標準で用意されています。  
下記に主なネットワークコマンドの種類を示します。  

| コマンド | 機能                          |
| :------- | :---------------------------- |
| ipconfig | ネットワークの設定を確認する  |
| ping     | 通信相手に応答を要求する      |
| tracert  | 通信相手までの経路を調べる    |
| nslookup | DNSサーバーに問い合わせをする |
| netstat  | 通信状態を確認する            |
| arp      | ARPテーブルの内容を確認する   |

これらのコマンドは、**Windowsのコマンドプロンプトで実行**します。

## 確認１：MACアドレスを見る
使用しているPCのMACアドレスを確認してみましょう。  

>　**< MACアドレス >**
> ネットワークのハードウェアに割り当てられる識別番号
> 48ビットの数値を8ビットずつ６つに区切り、それぞれを16進数で示す
> 
> 例： 00-00-5D-B8-39-B0
> 
> 上位24ビットがハードウェアのメーカーの識別番号であり、
> 下位24ビットが製品の機種とシリアル番号となる
> 
> 同じメーカーで同じシリアル番号の製品は存在しないので、
> MACアドレスは**世界に一つだけの番号**となる

コマンドプロンプトを開き、以下のコマンドを入力します。  

**`ipconfig /all`**  

実行すると、複数の情報が表示されます。  

[ここに実行したスクショを貼る]  

表示された情報の中から、**「物理アドレス」と示された部分にあるハイフン「-」で区切られた番号がMACアドレス**です。  

## 確認２：IPアドレスとサブネット・マスクを見る
MACアドレスはハードウェア的な識別番号ですが、それだけでインターネット上で通信先の識別を行うのは面倒です。  
なぜなら、企業単位でMACアドレスの上位桁を揃えるようなグループ化ができないからです。  
（名前だけでその人の居場所を特定するのは難しい）  

そのため、インターネットのように世界中のコンピュータを繋いだ大規模なネットワークでは、データの送信者と受信者を郵便番号のように整然とグループ化して識別する仕組みが必要です。  

そこで、MACアドレスとは別に、**ネットワーク上の住所を表す「IPアドレス」** が設定されます。  

> **< IPアドレス >**
> ネットワーク上の情報機器を識別するために指定するネットワーク層における識別用の番号  （**インターネット上の住所**）
> インターネットで使用されるIPというプロトコルで定義される  
> 32ビットの数値を8ビットずつドット（.）で区切り、それぞれを10進数で示す
>   
> 例：192.168.1.10  
>
> IPアドレスとして使える識別番号は、  
> 全部で 0.0.0.0 ~ 255.255.255.255 の 4,294,967,296通り（約43億個）  
>
> 上位桁は、ネットワークの識別番号であり「ネットワークアドレス」と呼ぶ  
> 下位桁は、ホストの識別番号であり「ホストアドレス」と呼ぶ  

パソコンに設定されているIPアドレスを見てみましょう。  
コマンドプロンプトを開き、以下のコマンドを入力します。  

**`ipconfig /all`**  

実行すると、複数の情報が表示されます。  

[ここに実行したスクショを貼る]  

表示された情報の中から、**「IPv4アドレス」と示された部分にある番号がIPアドレス**です。 

また、**「サブネットマスク」** と示された部分にある番号にも注目してください。  
サブネット・マスクは、32ビットのIPアドレスの上位桁と下位桁の区切りを示します。  
`255.255.255.0`というサブネット・マスクを２進数で表すと、  

`11111111.11111111.11111111.00000000`  

になります。
**1が並んでいる桁がネットワーク・アドレス**で、**0が並んでいる桁がホスト・アドレス**です。  
したがって、`255.255.255.0`というサブネット・マスクは、IPアドレスの上位24ビットがネットワーク・アドレスであり、下位8ビットがホスト・アドレスであることを示しています。
※同じネットワーク・アドレスを持つ情報機器は、同じネットワークに属していることになります。  

## おわりに
ネットワークコマンドの概要から、`ipconfig`コマンドを使用してMACアドレス、IPアドレスの確認についてまでをまとめました。  

次回は、引き続き`ipconfig`を使用して「DHCPサーバーの役割を知る」、  
新たに`ping`コマンドを使用して「デフォルトゲートウェイにPINGを送る」方法についてまとめます。  